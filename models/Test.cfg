\* Author: Ayush Srivastava
\* Comprehensive test configuration for Alpenglow formal verification
SPECIFICATION Spec

CONSTANTS
    \* Validator sets - small for exhaustive model checking
    Validators = {v1, v2, v3}
    ByzantineValidators = {}
    OfflineValidators = {}
    
    \* Bounded state space for model checking
    MaxSlot = 3
    MaxView = 3
    MaxTime = 10
    
    \* Network timing parameters
    GST = 2
    Delta = 1
    
    \* Stake mapping - equal distribution for simplicity
    Stake = [v1 |-> 10, v2 |-> 10, v3 |-> 10]
    
    \* Network parameters
    MaxMessageSize = 100
    NetworkCapacity = 2000
    MaxBufferSize = 30
    PartitionTimeout = 5
    MaxNetworkDelay = 2
    MessageLossRate = 0
    NetworkPartitions = {}
    RecoveryTimeout = 8
    MaxRetransmissions = 2
    
    \* Erasure coding parameters (Rotor)
    K = 2
    N = 3
    MaxBlocks = 5
    BandwidthLimit = 2000
    RetryTimeout = 3
    MaxRetries = 2
    
    \* Block and transaction parameters
    MaxBlockSize = 100
    BandwidthPerValidator = 800
    MaxTransactions = 8
    
    \* Consensus parameters (Votor)
    TimeoutDelta = 4
    InitialLeader = v1
    FastPathStake = 24  \* 80% of total stake (30)
    SlowPathStake = 18  \* 60% of total stake (30)
    SkipPathStake = 18  \* 60% of total stake (30)
    
    \* Cryptographic parameters
    MaxSignatures = 15
    MaxCertificates = 8
    
    \* Leader selection function (simplified for model checking)
    LeaderFunction = v1

\* Initial state and next-state relation
INIT Init
NEXT Next

\* Type and safety invariants
INVARIANT TypeOK
INVARIANT Safety
INVARIANT ChainConsistency
INVARIANT CertificateUniqueness
INVARIANT ConsistentFinalization
INVARIANT DeliveredBlocksConsistency
INVARIANT DeliveredBlocksValidity
INVARIANT DeliveredBlocksCorrespondence

\* Liveness properties
PROPERTY Progress
PROPERTY FastPath
PROPERTY BoundedFinalization

\* Resilience properties
PROPERTY ByzantineResilience
PROPERTY OfflineResilience
PROPERTY PartitionRecovery
PROPERTY Combined2020Resilience

\* Integration properties
PROPERTY RotorVotorIntegration
PROPERTY StakeProportionalBandwidth

\* State constraints for bounded model checking
CONSTRAINT StateConstraint

\* Action constraints to limit state space exploration
ACTION_CONSTRAINT ActionConstraint

\* Symmetry reduction for honest validators only
\* v4 is Byzantine, so only include honest validators v2, v3
\* v1 is excluded as the initial leader
SYMMETRY Permutations({v2, v3})

\* View for state space exploration optimization
VIEW <<currentSlot, clock, Cardinality(finalizedBlocks[currentSlot])>>

\* Disable deadlock checking for liveness properties
CHECK_DEADLOCK FALSE
