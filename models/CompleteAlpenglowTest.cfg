\* Complete Alpenglow Votor Test - All Paper Features
\* Author: Ayush Srivastava
\* Tests complete implementation per Alpenglow paper Sections 2.4-2.6

SPECIFICATION Spec

CONSTANTS
    \* 5 validators for clear thresholds testing
    Validators = {v1, v2, v3, v4, v5}
    ByzantineValidators = {}
    OfflineValidators = {}
    
    \* Minimal slots for comprehensive feature testing  
    MaxSlot = 2
    MaxView = 3
    
    \* Timing parameters
    GST = 2
    Delta = 1
    
    \* Required parameters
    MaxTime = 6
    MaxMessageSize = 100
    NetworkCapacity = 1000
    Stake = 500
    MaxBufferSize = 50
    PartitionTimeout = 5
    K = 3
    N = 5
    MaxBlocks = 2
    BandwidthLimit = 1000
    RetryTimeout = 3
    MaxRetries = 2
    HighLatencyThreshold = 50
    LowLatencyThreshold = 25
    LoadBalanceTolerance = 5
    Block = {b1, b2}
    ErasureCodedPiece = {p1, p2, p3}
    SlicesPerBlock = 2
    TotalShreds = 3
    ReconstructionThreshold = 2
    ResilienceParameter = 1
    SamplingMethod = "IID"

\* === COMPLETE ALPENGLOW TESTING ===

\* Core Type Safety
INVARIANT TypeInvariant
\* Basic Safety Properties
INVARIANT ThresholdCorrectness
INVARIANT StakeBasedThresholds
INVARIANT Safety

\* Dual-Path safety Properties (Critical for Alpenglow)
INVARIANT FastPathExclusivity        \* Fast path blocks slow path
INVARIANT CertificateUniqueness      \* No duplicate certificates  
INVARIANT NoDoubleFinalizations      \* Single finalization per slot
INVARIANT ProgressiveFinalization
INVARIANT TimeoutSafety

\* State Machine Properties (Paper Section 2.6)
INVARIANT LeaderWindowManagement

\* Pool and Vote Management (Paper Section 2.5)
INVARIANT ValidTimeoutSetting

\* === ESSENTIAL SCENARIO TESTING ===
\* Testing core dual-path functionality

\* Fast-Finalization Certificate (80% notar votes)
PROPERTY FastPathScenario

\* Notarization Certificate (60% notar + fallback votes) 
PROPERTY SlowPathScenario

\* === BASIC PROGRESS TESTING ===
\* Core functionality verification

PROPERTY FastPathProgress
PROPERTY SlowPathProgress

\* === MODEL CONSTRAINTS ===

CONSTRAINT ActionConstraint
