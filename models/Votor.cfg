\* COMPREHENSIVE ALPENGLOW VOTOR VERIFICATION
\* Author: Ayush Srivastava
\* Complete dual-path consensus with Byzantine fault tolerance

SPECIFICATION Spec

CONSTANTS
    Validators = {1, 2, 3, 4, 5}      \* 5 validators for dual-path testing
    ByzantineValidators = {5}        \* 20% Byzantine (1 out of 5)
    OfflineValidators = {}           \* No offline validators initially
    MaxView = 3                      \* Limited views for finite model
    MaxSlot = 2                      \* Multiple slots for complexity
    GST = 5                          \* Global Stabilization Time
    Delta = 2                        \* Network delay bound

\* === COMPREHENSIVE ALPENGLOW VOTOR VERIFICATION ===

\* Core type safety
INVARIANT TypeInvariant

\* Dual-path consensus verification  
INVARIANT FastPathFinalization      \* 80% threshold → fast certificate
INVARIANT SlowPathFinalization      \* 60% threshold → slow certificate  
INVARIANT FastPathExclusivity       \* Fast path prevents slow path
INVARIANT NoDoubleFinalizations     \* No double finalization
INVARIANT ThresholdCorrectness      \* 80% > 60% math

\* Certificate and voting properties
INVARIANT CertificateUniqueness     \* No duplicate certificates
INVARIANT DualPathCompleteness     \* Sufficient votes → certificates
INVARIANT StakeBasedThresholds      \* Proper 4/5 and 3/5 thresholds

\* Byzantine fault tolerance
INVARIANT DualPathResilience        \* 20% Byzantine + 20% offline tolerance

\* Timeout and performance
INVARIANT TimeoutSafety             \* Valid timeout handling
INVARIANT FastFinalizationTiming    \* 100ms performance target

\* Advanced dual-path behavior
INVARIANT FastPathBehavior          \* 4+ notar → fast certificate
INVARIANT SlowPathBehavior          \* 3+ combined → notarization
INVARIANT CertificateGeneration     \* Votes lead to certificates

\* Skip certificate handling
INVARIANT SkipCertificateGeneration \* Skip votes → skip certificates

\* Chain and safety properties
INVARIANT Safety                    \* Basic safety
INVARIANT ChainConsistency          \* Chain structure valid
INVARIANT ProgressiveFinalization   \* Progressive slot finalization
