\* Author: Ayush Srivastava
\* Partition Healing Configuration
\* Tests network partition and recovery scenarios

SPECIFICATION Spec

CONSTANTS
    \* Network parameters
    Validators = {v1, v2, v3, v4, v5}
    MaxSlot = 10
    MaxView = 15
    Delta = 2
    GST = 5
    
    \* Byzantine and offline sets
    ByzantineValidators = {}
    OfflineValidators = {v5}
    
    \* Stake distribution
    Stake = [v1 |-> 20, v2 |-> 20, v3 |-> 15, v4 |-> 15, v5 |-> 10, v6 |-> 10, v7 |-> 10]
    
    \* Partition configuration
    InitialPartition = {{v1, v2}, {v3, v4, v5}}
    PartitionHealTime = 8
    
    \* Certificate thresholds
    FastPathThreshold = 80  \* 80% for fast path
    SlowPathThreshold = 60  \* 60% for slow path
    
    \* Additional parameters
    Leader = v1
    TimeoutDelta = 5
    K = 3
    N = 5
    MaxBlockSize = 100
    BandwidthPerValidator = 50
    MaxMessageSize = 10
    NetworkCapacity = 5000
    LeaderFunction(v, Vals) == CHOOSE x \in Vals : TRUE  \* Simple leader selection

INIT Init

NEXT Next

\* Invariants to check
INVARIANT TypeOK
INVARIANT Safety
INVARIANT PartitionSafety

\* Properties to verify
PROPERTY PartitionRecovery

\* State constraints
CONSTRAINT
    /\ currentSlot <= MaxSlot
    /\ \A v \in Validators : votorView[v] <= MaxView
    /\ Cardinality(messages) <= 500
